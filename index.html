<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <title>
  Twittler
  </title>
  <style type="text/css">
  @font-face{
    font-family: "PoiretOne-Regular";
    src: url(PoiretOne-Regular.ttf);
  }
  div.pre.post.user{
    background-image: url("linedpaper.png");
  }
  body {
    font-family: "PoiretOne-Regular";

    text-align: center;
    background-color:beige;
    background-image: url("paper_blur.jpg");
}
    div.post {
      /*width : 850px;*/
/*      text-align: center;
*/      margin-left: auto;
      margin-right: auto;
      position: relative;
/*      background-color:lightgray;
       opacity: 0.8;
      /*left:320px;*/
        /*background-image: url("linedpaper.png");*/
    }
div.pre {
    font-size: 120%;
/*      text-align: left;
*/      margin-left: auto;
      margin-right: auto;
      position: relative;
/*      background-color:lightgray;
*/      opacity: 0.8;
      right:320px;
      bottom: 20px;
    }
  div.user {
    /*background-image: url("linedpaper.png");*/
      font-weight: bold;
      font-size: 150%;
/*      text-align: left;
*/      margin-left: auto;
        margin-right: auto;
        position: relative;
    /*      background-color:lightgray;
    */      opacity: 0.8;
        right:50px;
  }
    h1   {
      color:blue;
      vertical-align: true;
    }
    p    {color:green}
  </style>
  <body>
    <script>
      $(document).ready(function(){
        var $body = $('body');
        var previousStreamLength;
        setInterval(function(){
          $body.html('<h1> Your stream on Twittler! </h1>');
          // $body.empty();
          var index = streams.home.length - 1;
          var cutoff=index-20;
          // console.log(streams.home[index].created_at.getTime());
          while (index>=0){
            var tweet = streams.home[index];
            var $tweet = $('<div class="post"></div>');
            var $tweetTime = $('<div class="pre"></div>');
            var $tweetUser = $('<div class="user"></div>');
            // $tweet[name]=index;
            // console.log(new Date().getTime());
            // console.log($tweet);
            var writeup=function(){
              var elapsed=(new Date().getTime()-tweet.created_at.getTime())/1000;
            if (elapsed<10){
              return "Just now..."
            }
            else{
              if (elapsed<40){
                return "A few seconds ago";
              }
              if (elapsed<70){
                return "A minute ago";
              }
              if (elapsed<120){
                return "A couple minutes ago";
              }
              else{
                return "A few minutes ago";
              }

            }
          };
            $tweetTime.text(writeup());
            $tweet.text(tweet.message);
            $tweetUser.text('@'+tweet.user);
            // $( "div" ).remove( ":contains('"+index+"')" );
            $tweetUser.appendTo($body);
            $tweet.appendTo($body);
            $tweetTime.appendTo($body);
            // $("body").prepend($tweet);
            index -= 1;
          }
        },1000);

      });

    </script>
  </body>
</html>
